###############################################################################
# Schedule Master Bedroom
###############################################################################
- id: master_bedroom_schedule
  alias: "Master Bedroom Schedule"
  trace:
      stored_traces: 10
  trigger:
    - platform: time
      id: master_bedroom_morning
      at:
        - "07:00:00"

    - platform: time
      id: master_bedroom_evening
      at:
        - "23:00:00"

  action:
    #-------------------------------------------
    # Morning
    #-------------------------------------------
    - choose:
        - conditions:
            - condition: trigger
              id: 'master_bedroom_morning'
          sequence:
            # IF Morning: Fan Sounds Alexa
            - choose:
                - conditions:
                    - condition: state
                      entity_id: media_player.weston_echo
                      attribute: available
                      state: true
                  sequence:
                    - service: script.alexa_fan_sounds
                      data:
                        alexa_device: media_player.weston_echo
                        bool_fan: false
                    - delay:
                        seconds: 3

    #-------------------------------------------
    # Evening
    #-------------------------------------------
    - choose:
        - conditions:
            - condition: trigger
              id: 'master_bedroom_evening'
          sequence:
            # IF Evening: Fan Sounds Alexa
            - choose:
                - conditions:
                    - condition: state
                      entity_id: media_player.weston_echo
                      attribute: available
                      state: true
                    - condition: state
                      entity_id: input_boolean.master_bedroom_echo_en
                      state: 'on'
                  sequence:
                    - service: script.alexa_fan_sounds
                      data:
                        alexa_device: media_player.weston_echo
                        bool_fan: true