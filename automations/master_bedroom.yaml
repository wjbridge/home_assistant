###############################################################################
# Schedule Master Bedroom
###############################################################################
- id: master_bedroom_schedule
  alias: "Master Bedroom Schedule"
  trace:
      stored_traces: 10
  trigger:
    - platform: time
      at:
        - "08:00:00"
        - "20:15:00"

  condition:
    - condition: state
      entity_id: media_player.spot
      attribute: available
      state: true

  action:
    - choose:
        # IF morning
        - conditions:
            - condition: template
              value_template: "{{ now().hour == 8 }}"
          sequence:
            - service: fan.turn_off
              entity_id: fan.master_bedroom
            - delay:
                seconds: 3
            - service: script.alexa_fan_sounds
              data:
                alexa_device: media_player.spot
                bool_fan: false
              

        # ELIF night
        - conditions:
            - condition: template
              value_template: "{{ now().hour == 20 }}"
          sequence:
            - service: fan.turn_on
              entity_id: fan.master_bedroom
              data:
                percentage: 75
            - delay:
                seconds: 3
            - service: script.alexa_fan_sounds
              data:
                alexa_device: media_player.spot
                bool_fan: true