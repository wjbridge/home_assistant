###############################################################################
# Schedule Front Door
###############################################################################
- id: front_door_schedule
  alias: "Front Door Schedule"
  trace:
      stored_traces: 5
  trigger:
    - platform: sun
      event: sunset
      offset: "01:00:00"

    - platform: sun
      event: sunrise
      offset: "-01:00:00"

  condition:
    - condition: not
      conditions:
        - condition: state
          entity_id: light.outside_front_door_light
          state: 'unavailable'

  action:
    - choose:
        # IF morning
        - conditions:
            - condition: state
              entity_id: light.outside_front_door_light
              state: 'on'
            - condition: template
              value_template: "{{ trigger.event == 'sunrise' }}"
          sequence:
            - service: light.turn_off
              entity_id: light.outside_front_door_light

            - service: light.turn_off
              entity_id:
                  - light.outside_candy_cane_lights
                  - light.outside_tree_lights

        # ELIF night
        - conditions:
            - condition: template
              value_template: "{{ trigger.event == 'sunset' }}"
            - condition: state
              entity_id: light.outside_front_door_light
              state: 'off'
          sequence:
            - service: light.turn_on
              entity_id: light.outside_front_door_light

            - service: light.turn_on
              entity_id:
                  - light.outside_candy_cane_lights
                  - light.outside_tree_lights