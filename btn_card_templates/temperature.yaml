  # !toggle word-wrap

  battery_base:
    aspect_ratio: 1
    show_icon: false
    show_state: true
    show_name: true
    tap_action:
      animation_card: |
        [[[
          const animation_speed_ms = 900;
          const animation = `card_bounce ${animation_speed_ms}ms cubic-bezier(0.22, 1, 0.36, 1)`;
          this.shadowRoot.getElementById("card").style.animation = animation;
          window.setTimeout(() => {
            this.shadowRoot.getElementById("card").style.animation = "none";
          }, animation_speed_ms)
        ]]]
    styles:
      card:
        - background-color: rgba(0,0,0,0.4)
        - font-color: rgb(255,255,255,0.9)
        - text-shadow: 0px 0px 1px black
        - letter-spacing: 0.05vw
      name:
        - color: rgb(255,255,255,0.6)
    extra_styles: |
      @keyframes card_bounce {
        0% {
          transform: scale(1);
        }
        15% {
          transform: scale(0.9);
        }
        25% {
          transform: scale(1);
        }
        30% {
          transform: scale(0.98);
        }
        100% {
          transform: scale(1);
        }
      }

  #################################################
  #                                               #
  #                     TEMP                      #
  #                                               #
  #################################################

  temp:
    show_state: false
    show_icon: true
    custom_fields:
      #icon: >
      #    <ha-icon icon="mdi:garage" style="color:var(--state-icon-color);"></ha-icon>
      circle: >
        [[[
          if (entity && entity.state) {
            let input = entity.state == null ? ' ' : `${parseInt(entity.state)}<tspan font-size="10">Â°F</tspan>`,
              fill_color = variables.state === 'off' ? 'rgba(255,255,255,0.04)' : 'none';
            return `
              <svg viewBox="0 0 50 50">
                <circle cx="25" cy="25" r="20.5" fill="${fill_color}" stroke="#b2b2b2" stroke-width="1.5" />
                <text x="50%" y="54%" fill="#8d8e90" font-size="14" text-anchor="middle" alignment-baseline="middle" dominant-baseline="middle">${input}</text>
              </svg>
            `;
          }
        ]]]
      graph:
        card:
          type: 'custom:mini-graph-card'
          color_thresholds:
            - color: '#0302FC'
              value: 0
            - color: '#2A00D5'
              value: 32
            - color: '#63009E'
              value: 54
            - color: '#A1015D'
              value: 72
            - color: '#D80027'
              value: 86
            - color: '#FE0002'
              value: 95
          hours_to_show: 24
          line_width: 8
          font_size: 75
          show:
            name: false
            icon: false
            state: false
    styles:
      name: [top: 55%, left: 5%, width: 100%, position: absolute]
      custom_fields:
        graph: [bottom: 0%, left: 0%, width: 100%, position: absolute]
        circle:
          - display: initial
          - width: 90%
          - letter-spacing: 0.03vw
          - margin: -6% -6% 0 0
          - justify-self: end
          - opacity: 1
        #icon:
        #  - width: 67%
        #  - fill: "var(--state-icon-color)"
    template:
      - base
      - icon_temperature