#-------------------------------------------
# Template for Updates
#-------------------------------------------
- sensor:
    - unique_id: updates
      state: template
      attributes:
        plex: >
          {% set installed = states('sensor.plex_version_installed') %}
          {% set latest = states('sensor.plex_server_release_notes') %}
          {% set update_available = state_attr('sensor.plex_server_release_notes', 'update_available') %}
          {% set url = 'https://forums.plex.tv/t/plex-media-server/30447' %}

          {% if update_available and installed != 'unavailable' and latest != 'unavailable' %}
            {% if installed != latest and update_available %}
              <b><a href="#" onclick="window.open('{{ url }}');">plex</a></b> {{ installed + ' <b>&rarr;</b> ' + latest }}
            {% endif %}
          {% endif %}

        unifi: >
          {% set installed = states('sensor.template_udm_version') %}
          {% set url = 'https://community.ui.com/releases?q=dream+machine+se' %}
          {% if is_state('binary_sensor.template_udm_upgradable', 'on') %}
            <b><a href="#" onclick="window.open('{{ url }}');">UniFi Dream Machine SE ({{ installed }})</a></b> Update Available
          {% endif %}