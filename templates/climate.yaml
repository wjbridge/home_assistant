#-------------------------------------------
#  Template for climate
#-------------------------------------------
- sensor:
    - unique_id: operating_state
      state: "{{ state_attr('climate.thermostat', 'hvac_action') }}"

    - unique_id: weather_low_temp
      state: "{{ state_attr('weather.homedev', 'forecast')[0]['templow'] }}"

    - unique_id: equipment_resume
      state: >
        {% set new_temp = states('sensor.openweathermap_forecast_temperature_low') | float(default=0.0) %}
        {% if new_temp < 50 -%}
          heat
        {%- else -%}
          cool
        {%- endif %}

#-------------------------------------------
#  Template for Sun
#-------------------------------------------

    - unique_id: sun_azimuth
      state: >
        {{ state_attr('sun.sun', 'azimuth') }}

    - unique_id: sun_elevation
      state: >
        {{ state_attr('sun.sun', 'elevation') }}